<?xml version="1.0" encoding="UTF-8"?>
<theme name="Default" author_name="Invision Power Services, Inc" author_url="http://www.invisionpower.com">
 <template template_group="browse" template_name="categories" template_data="" template_location="front" template_app="videos"><![CDATA[{{if !\IPS\Request::i()->isAjax()}}
	<div class="ipsPageHeader ipsPad_half ipsClearfix ipsSpacer_bottom">
		<h1 class="ipsType_pageTitle">{lang="module__videos_categories"}</h1>
	</div>
	<div class='ipsBox'>
		
{{endif}}
<ol class="ipsDataList ipsDataList_large">
	{template="categoryRow" group="browse" params="NULL, NULL, \IPS\videos\Category::roots()"}
</ol>
{{if !\IPS\Request::i()->isAjax()}}	
	</div>
{{endif}}]]></template>
 <template template_group="browse" template_name="categoriesBlock" template_data="$currentCategory=NULL" template_location="front" template_app="videos"><![CDATA[{{$categories = $currentCategory ? $currentCategory->children() : \IPS\videos\Category::roots();}}
{{if !empty( $categories )}}
<div id='elVideosCategories' class='ipsWidget ipsWidget_vertical ipsBox'>
	<h3 class='ipsWidget_title ipsType_reset'>{{if $currentCategory}}{lang="video_subcategories"}{{else}}{lang="video_categories"}{{endif}}</h3>
	<div class='ipsWidget_inner'>
		<div class='ipsSideMenu'>
			<ul class='ipsSideMenu_list'>
				{{foreach $categories as $idx => $category}}
                    {{if !\IPS\Request::i()->group OR ( \IPS\Request::i()->group AND $category->_options->cat_group AND $category->_options->cat_group == \IPS\Request::i()->group ) }}
    					<li>
    						<a href="{$category->url()}" class='ipsSideMenu_item {{if $currentCategory && $currentCategory->id == $category->id}}{{endif}} ipsTruncate ipsTruncate_line'><span class='ipsBadge ipsBadge_style1 ipsPos_right cVideosCategoryCount'>{expression="\IPS\videos\Video::contentCount( $category )"}</span><strong class='ipsType_normal'>{$category->_title}</strong></a>
    						{{if $category->hasChildren()}}
    							<ul class="ipsSideMenu_list">
    								{{foreach $category->children() as $idx => $subcategory}}
    									<li>
    										{{if $idx >= 5}}
    											<a href='{$category->url()}' class='ipsSideMenu_item'><span class='ipsType_light ipsType_small'>{lang="and_x_more" sprintf="count( $category->children() ) - 5"}</span></a>
    											{{break;}}
    										{{else}}
    											<a href="{$subcategory->url()}" class='ipsSideMenu_item ipsTruncate ipsTruncate_line'><strong class='ipsPos_right ipsType_small cVideosCategoryCount'>{expression="\IPS\videos\Video::contentCount( $subcategory )"}</strong>{$subcategory->_title}</a>
    										{{endif}}
    									</li>
    								{{endforeach}}
    							</ul>
    						{{endif}}                            
    					</li>
                    {{endif}}
				{{endforeach}}
			</ul>
			<p class='ipsType_center'>
				<a href='{url="app=videos&module=videos&controller=browse&do=categories" seoTemplate="videos_categories"}' class='ipsType_light'>{lang="view_all_categories"}</a>
			</p>
		</div>
	</div>
</div>
{{endif}}]]></template>
 <template template_group="browse" template_name="categoryPage" template_data="$category, $table" template_location="front" template_app="videos"><![CDATA[{{if $category}}
    <div class="ipsPageHeader ipsClearfix ipsSpacer_bottom">
		{{if $category->cat_image}}
			<img src="{file="$category->cat_image" extension="videos_CategoryImage"}" class='ipsThumb ipsThumb_tiny'>
		{{endif}}    
    	<h1 class="ipsType_pageTitle">{$category->_title}</h1>
    	<div class='ipsPos_right ipsResponsive_noFloat ipsResponsive_hidePhone'>
    		{template="follow" app="core" group="global" params="'videos', 'category', $category->_id, \IPS\videos\Video::containerFollowers( $category )->count( TRUE )"}
    	</div>
    	{{if $category->description}}
    		<div class='ipsPageHeader_info ipsType_normal'>
    			{$category->description|raw}
    		</div>
    	{{endif}}
        
    	{{if $category->_rules}}
    		<div class='ipsMessage ipsMessage_info'>
    			{$category->_rules|raw}
    		</div>
    	{{endif}}         
    </div>
{{else}}
    {template="pageHeader" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack('page__listall')"}
{{endif}}

{{if \IPS\videos\Category::canOnAny('add') AND member.member_id}}
    <ul class="ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_bottom">
        <li class='ipsToolList_primaryAction'>
        	<a class="ipsButton ipsButton_medium ipsButton_normal ipsButton_fullWidth" href="{{if $category}}{$category->url()->setQueryString( array( 'filter' => 'filter_myvideos' ) )}{{else}}{url="app=videos&module=videos&controller=browse&do=listall&filter=filter_myvideos" seoTemplate="videos_listall"}{{endif}}">{lang="my_videos_button"}</a>
        </li>     
        <li class='ipsToolList_primaryAction'>
        	<a class="ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth" {{if isset( $category ) && !$category->cat_only AND member.member_id}}href="{url="app=videos&module=videos&controller=submit&do=submit&category={$category->_id}" seoTemplate="videos_add"}"{{else}}href="{url="app=videos&module=videos&controller=submit&_new=1" seoTemplate="videos_add"}" data-ipsDialog data-ipsDialog-title='{lang="add_video"}' data-ipsDialog-size='narrow'{{endif}}>{lang="add_video"}</a>
        </li>
    </ul>
{{endif}}

<div class='ipsClear ipsBox'>
{$table|raw}
</div>]]></template>
 <template template_group="browse" template_name="categoryRow" template_data="$table, $headers, $categories" template_location="front" template_app="videos"><![CDATA[{{foreach $categories as $category}}
	{{if $category->can('view')}}    
        {{if !\IPS\Request::i()->group OR ( \IPS\Request::i()->group AND $category->_options->cat_group AND $category->_options->cat_group == \IPS\Request::i()->group ) }}     
    		<li class="ipsDataItem ipsDataItem_responsivePhoto ipsClearfix">
    			<div class='ipsDataItem_icon'>
                    {{if $category->cat_image}}
            			<img src="{file="$category->cat_image" extension="videos_CategoryImage"}" class='ipsThumb ipsThumb_tiny'>
                    {{else}}            
        				<span class='ipsItemStatus ipsItemStatus_large {{if !\IPS\videos\Video::containerUnread( $category )}}ipsItemStatus_read{{endif}}'>
        					<i class="fa fa-video"></i>
        				</span>
                    {{endif}}
    			</div>
    			<div class="ipsDataItem_main ipsPos_middle">
    				<h4 class="ipsDataItem_title ipsType_large">
    					<a href="{$category->url()}">{$category->_title}</a>
    				</h4>
    				{{if $category->hasChildren()}}
    					<ul class="ipsDataItem_subList ipsList_inline">
    						{{foreach $category->children() as $subcategory}}
    							<li class="{{if \IPS\videos\Video::containerUnread( $subcategory )}}ipsDataItem_unread{{endif}}">
    								<a href="{$subcategory->url()}">{$subcategory->_title}</a>
    							</li>
    						{{endforeach}}
    					</ul>
    				{{endif}}
    				{{if $category->description}}
    					<p class="ipsDataItem_meta">{$category->description|raw}</p>
    				{{endif}}
    			</div>
    			<dl class="ipsDataItem_stats ipsDataItem_statsLarge">
    				{{$count = \IPS\videos\Video::contentCount( $category );}}
    				<dt class="ipsDataItem_stats_number">{number="$count"}</dt>
    				<dd class="ipsDataItem_stats_type ipsType_light">{lang="videos"}</dd>
    			</dl>
    			<ul class="ipsDataItem_lastPoster ipsDataItem_withPhoto">
    				{{if $lastPost = $category->lastVideo()}}
    					<li>{template="userPhoto" app="core" group="global" params="$lastPost->author(), 'tiny'"}</li>
    					<li><a href="{$lastPost->url()}" class='ipsType_break ipsContained'>{truncate="$lastPost->title" length="30"}</a></li>
    					<li>{lang="byline_nodate" htmlsprintf="$lastPost->author()->link()"}</li>
    					<li data-short="1 dy" class="ipsType_light">{datetime="$lastPost->date"}</li>
    				{{endif}}
    			</ul>                
    		</li>
        {{endif}}
	{{endif}}
{{endforeach}}]]></template>
 <template template_group="browse" template_name="commentList" template_data="$table" template_location="front" template_app="videos"><![CDATA[{template="pageHeader" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack('module__videos_comments')"}

<div class='ipsBox'>
	{$table|raw}
</div>]]></template>
 <template template_group="browse" template_name="featuredVideo" template_data="$video" template_location="front" template_app="videos"><![CDATA[<li class='ipsCarousel_item ipsAreaBackground_reset ipsPad'>
	<div class='ipsColumns ipsColumns_collapsePhone'>
        {{if !settings.vs_featured_embed}}
    		<div class='ipsColumn ipsColumn_medium ipsType_center'>
    			{template="thumb" group="global" app="videos" params="$video"}
    		</div>
        {{endif}}
		<div class='ipsColumn ipsColumn_fluid'>
			<h2 class='ipsType_pageTitle'>
				{{if $video->prefix()}}
					<a href="{url="app=core&module=search&controller=search&do=tags&tag={$video->prefix( TRUE )}" seoTemplate="tags"}" title="{lang="find_tagged_content" sprintf="$video->prefix()"}" class='ipsTag_prefix'>{$video->prefix()}</a>
				{{endif}}
				<a href='{$video->url()}'>{$video->title}</a>
				<span class='ipsType_large ipsType_light ipsType_unbold ipsType_noBreak'>{lang="byline_nodate" htmlsprintf="$video->author()->link()"}</span>
			</h2>
			<ul class='ipsList_inline'>
				<li>
					{template="rating" group="global" location="front" app="core" params="'large', $video->averageRating()"}
				</li>
				{{if settings.vs_enable_comments}}
					<li class='ipsType_normal'>
						{{if $video->num_comments}}
							<i class='fa fa-comment'></i> {$video->num_comments}
						{{else}}
							<span class='ipsType_light'><i class='fa fa-comment'></i> 0</span>
						{{endif}}
					</li>
				{{endif}}
			</ul>            
			
            {{if !settings.vs_featured_embed}}
    			<div class='ipsType_richText ipsType_normal ipsSpacer_top' data-ipsTruncate data-ipsTruncate-type="remove" data-ipsTruncate-size="2 lines">
    				{$video->truncated()|raw}
    			</div>
            {{endif}}            
            
            {{if settings.vs_featured_embed}}
                <div class='ipsType_normal ipsType_richText ipsContained ipsSpacer_top'>
                    {$video->embed|raw}
                </div>  
            {{endif}}								
		</div>
	</div>
</li>]]></template>
 <template template_group="browse" template_name="index" template_data="$videos, $featured" template_location="front" template_app="videos"><![CDATA[{template="pageHeader" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack('module__videos_videos')"}

{{if \IPS\videos\Category::canOnAny('add') AND member.member_id}}
    <ul class="ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_bottom">
        <li class='ipsToolList_primaryAction'>
        	<a class="ipsButton ipsButton_medium ipsButton_normal ipsButton_fullWidth" href="{url="app=videos&module=videos&controller=browse&do=listall&filter=filter_myvideos" seoTemplate="videos_listall"}">{lang="my_videos_button"}</a>
        </li>     
        <li class='ipsToolList_primaryAction'>
        	<a class="ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth" href="{url="app=videos&module=videos&controller=submit&_new=1" seoTemplate="videos_add"}" data-ipsDialog data-ipsDialog-title='{lang="add_video"}' data-ipsDialog-size='narrow'>{lang="add_video"}</a>
        </li>
    </ul>
{{endif}}

{{if !empty( $featured )}}
	<div class='ipsBox ipsSpacer_bottom'>
		<h2 class='ipsType_sectionTitle ipsType_reset'>{lang="featured_videos" pluralize="count($featured)"}</h2>
		<section id='elVideosFeatured'>
			<div style='max-height:600px !important;' class='ipsCarousel ipsClearfix' data-ipsCarousel data-ipsCarousel-fullSizeItems data-ipsCarousel-slideshow data-ipsCarousel-shadows='false'>
				<ul class='cVideosCarousel ipsClearfix' data-role="carouselItems">
					{{foreach $featured as $video}}
						{template="featuredVideo" group="browse" app="videos" params="$video"}
					{{endforeach}}
				</ul>
				<span class='ipsCarousel_shadow ipsCarousel_shadowLeft'></span>
				<span class='ipsCarousel_shadow ipsCarousel_shadowRight'></span>
				<a href='#' class='ipsCarousel_nav ipsHide' data-action='prev'><i class='fa fa-chevron-left'></i></a>
				<a href='#' class='ipsCarousel_nav ipsHide' data-action='next'><i class='fa fa-chevron-right'></i></a>
			</div>
		</section>
	</div>
{{endif}}

<div class='ipsBox'>
	<h2 class='ipsType_sectionTitle ipsType_reset'>{lang="new_videos"}</h2>
	<div class='ipsAreaBackground ipsPad_half'>
		{{if count( $videos )}}
			<div class='ipsClearfix'>
				<ul class='ipsGrid ipsGrid_collapsePhone'> 
					{{foreach $videos as $idx => $row}}
                        <li class='ipsGrid_span3 ipsType_center ipsAreaBackground_reset ipsType_blendLinks ipsClearfix  {{if $row->hidden()}}ipsModerated{{endif}}' style='min-width: 150px;'>
                        	{template="thumb" group="global" app="videos" params="$row"}
                    		<div class='ipsPad_half'>
                    			<h3 class='ipsType_medium ipsType_reset ipsTruncate ipsTruncate_line' data-ipsTruncate data-ipsTruncate-size='1 lines' data-ipsTruncate-type='remove'>
                                    <a href='{$row->url()}'>{$row->title}</a>
                    			</h3>
                    			<span class='ipsType_light ipsType_small'>
                                    {template="userPhoto" group="global" app="core" params="$row->author(), 'tiny', NULL, 'ipsUserPhoto_tiny_videos'"}
                                    {$row->author()->link()|raw} &middot; {datetime="$row->date" dateonly="true"} &middot; {lang="num_video_views" pluralize="$row->views"}
                                </span>                 		
                            </div>
                        </li>
					{{endforeach}}
				</ul>
			</div>
		{{else}}
			<p class='ipsType_reset ipsType_light ipsPad'>{lang="no_new_videos"}</p>
		{{endif}}
	</div>
</div>]]></template>
 <template template_group="browse" template_name="videoRow" template_data="$table, $headers, $rows" template_location="front" template_app="videos"><![CDATA[{{foreach $rows as $row}}
	<li class="ipsDataItem ipsAreaBackground_reset {{if $row->unread()}}ipsDataItem_unread{{endif}} {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if $row->hidden()}}ipsModerated{{endif}}">
		<div class='ipsDataItem_icon ipsPos_top ipsResponsive_hidePhone'>
            {template="thumb" group="global" app="videos" params="$row, 'tiny'"}	
		</div>
		<div class='ipsDataItem_main'>
            <h4 class='ipsDataItem_title ipsType_sectionHead'>
				{{if $row->unread()}}
					<span class='ipsItemStatus ipsItemStatus_small' data-ipsTooltip title='{{if $row->unread() === -1}}{lang="new"}{{else}}{lang="updated"}{{endif}}'><i class="fa fa-circle"></i></span>&nbsp;
				{{endif}}            
            
    			{{if $row->prefix()}}
    				{template="prefix" group="global" app="core" params="$row->prefix( TRUE ), $row->prefix()"}
    			{{endif}}        
    
				<a href='{$row->url()}'>{$row->title}</a>

    			{{if $row->hidden() === -1}}
    				<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$row->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span>
    			{{elseif $row->hidden() === 1}}
    				<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span>
    			{{endif}}
                {{if $row->averageRating()}}<br>{template="rating" app="core" params="'small', $row->averageRating()" group="global"}{{endif}}<br>
		    </h4>
            
			{{if count( $row->tags() )}}
				{template="tags" group="global" app="core" params="$row->tags()"}
			{{endif}}            
        </div>

		<ul class='ipsDataItem_stats'>			
			<li>
				<span class='ipsDataItem_stats_number'>{lang="num_video_comments" pluralize="$row->num_comments"}</span>				
			</li>		
			<li class='ipsType_light'>
				<span class='ipsDataItem_stats_number'>{lang="num_video_views" pluralize="$row->views"}</span>
			</li>			
		</ul>

		<ul class='ipsDataItem_lastPoster ipsDataItem_withPhoto'>
			<li>		
                {template="userPhoto" app="core" group="global" params="$row->author(), 'tiny'"}
			</li>
			<li>
				{$row->author()->link()|raw}	
			</li>
			<li class="ipsType_light">
                {datetime="$row->__get( $row::$databaseColumnMap['date'] )" dateonly="true"}
			</li>
		</ul>                
		{{if $table->canModerate()}}
			<div class='ipsDataItem_modCheck ipsType_noBreak ipsPos_center'>
				<a href='#elVideo{$row->tid}_menu' id='elVideo{$row->tid}' class='ipsType_large ipsPos_middle ipsType_blendLinks' data-ipsMenu>
					<i class='fa fa-cog'></i> <i class='fa fa-caret-down'></i>
				</a>
                
				<input type='checkbox' data-role='moderation' name="moderate[{$row->tid}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state='{$row->tableStates()}'>

				<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide' id='elVideo{$row->tid}_menu'>
					{{if $row->canEdit()}}				
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'edit' ) )}' title='{lang="video_edit_details_title"}'>{lang="video_edit_details"}</a></li>
					{{endif}}
					{{if $row->canHide()}}				
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'hide' ) )}' title='{lang="hide_title_video"}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
					{{endif}}
					{{if $row->canUnhide()}}				
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unhide' ) )}' title='{{if $row->hidden() === 1}}{lang="approve_title_video"}{{else}}{lang="unhide_title_video"}{{endif}}'>{{if $row->hidden() === 1}}{lang="approve"}{{else}}{lang="unhide"}{{endif}}</a></li>
					{{endif}}                          
					{{if $row->canFeature() AND !$row->featured}}				
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'feature' ) )}' title='{lang="feature_title_video"}'>{lang="feature"}</a></li>
					{{endif}}
					{{if $row->canUnfeature() AND $row->featured}}				
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unfeature' ) )}' title='{lang="unfeature_title_video"}'>{lang="unfeature"}</a></li>
					{{endif}}
					{{if $row->canMove()}}				
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'move' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="move"}"  title='{lang="video_move_title"}'>{lang="move"}</a></li>
					{{endif}}
					{{if $row->canDelete()}}	
                        <li class='ipsMenu_sep'></li>			
						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete' ) )}' data-confirm  title='{lang="video_delete_title"}'>{lang="delete"}</a></li>
					{{endif}}
				</ul>
			</div>
		{{endif}}                      
	</li>
{{endforeach}}]]></template>
 <template template_group="browse" template_name="videoTable" template_data="$table, $headers, $rows, $quickSearch" template_location="front" template_app="videos"><![CDATA[<div data-baseurl='{$table->baseUrl}' data-resort='{$table->resortKey}' data-controller='core.global.core.table{{if $table->canModerate()}},core.front.core.moderation{{endif}}' {{if $table->getPaginationKey() != 'page'}}data-pageParam='{$table->getPaginationKey()}'{{endif}}>
	{{if $table->title}}
		<h2 class='ipsType_sectionTitle ipsType_reset ipsClear'>{lang="$table->title"}</h2>
	{{endif}}

	{{if $table->canModerate() OR ( $table->showAdvancedSearch AND ( (isset( $table->sortOptions ) and !empty( $table->sortOptions )) OR $table->advancedSearch ) ) OR !empty( $table->filters ) OR $table->pages > 1}}
	<div class="ipsButtonBar ipsPad_half ipsClearfix ipsClear">
		{{if $table->canModerate() AND $table->showFilters}}
			<ul class="ipsButtonRow ipsPos_right ipsClearfix">
				<li>
					<a class="ipsJS_show" href="#elCheck_menu" id="elCheck_{$table->uniqueId}" title='{lang="{$table->langPrefix}select_rows_tooltip"}' data-ipsTooltip data-ipsAutoCheck data-ipsAutoCheck-context="#elTable_{$table->uniqueId}" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active">
						<span class="cAutoCheckIcon ipsType_medium"><i class="fa fa-square-o"></i></span> <i class="fa fa-caret-down"></i>
						<span class='ipsNotificationCount' data-role='autoCheckCount'>0</span>
					</a>
					<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide" id="elCheck_{$table->uniqueId}_menu">
						<li class="ipsMenu_title">{lang="{$table->langPrefix}select_rows"}</li>
						<li class="ipsMenu_item" data-ipsMenuValue="all"><a href="#">{lang="all"}</a></li>
						<li class="ipsMenu_item" data-ipsMenuValue="none"><a href="#">{lang="none"}</a></li>
						{{if count($table->getFilters())}}
							<li class="ipsMenu_sep"><hr></li>
							{{foreach $table->getFilters() as $filter}}
								{{if $filter}}
									<li class="ipsMenu_item" data-ipsMenuValue="{$filter}"><a href="#">{lang="$filter"}</a></li>
								{{else}}
									<li class="ipsMenu_sep"><hr></li>
								{{endif}}
							{{endforeach}}
						{{endif}}
					</ul>
				</li>
			</ul>
		{{endif}}
		
		<ul class="ipsButtonRow ipsPos_right ipsClearfix">
			{{if $table->showAdvancedSearch AND ( ( isset( $table->sortOptions ) and count( $table->sortOptions ) > 1 ) OR $table->advancedSearch )}}
				<li>
					{{if isset($table->sortOptions) }}
					<a href="#elSortByMenu_menu" id="elSortByMenu_{$table->uniqueId}" data-role="sortButton" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active" data-ipsMenu-selectable="radio">{lang="sort_by"} <i class="fa fa-caret-down"></i></a>
					<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide" id="elSortByMenu_{$table->uniqueId}_menu">
							{{$custom = TRUE;}}
							{{foreach $table->sortOptions as $k => $col}}
								<li class="ipsMenu_item {{if $col === $table->sortBy}}{{$custom = FALSE;}}ipsMenu_itemChecked{{endif}}" data-ipsMenuValue="{$col}" data-sortDirection='{{if $col == 'date' OR $col == 'num_comments' OR $col == 'views' OR $col == 'video_rating'}}desc{{else}}asc{{endif}}'><a href="{$table->baseUrl->setQueryString( array( 'filter' => $table->filter, 'sortby' => $col, 'sortdirection' => ( $col == 'date_run' OR $col == 'date' OR $col == 'num_comments' OR $col == 'views' OR $col == 'video_rating' ) ? 'desc' : 'asc', 'page' => '1' ) )}">{lang="{$table->langPrefix}sort_{$k}"}</a></li>
							{{endforeach}}
						{{if $table->advancedSearch}}
							<li class="ipsMenu_item {{if $custom}}ipsMenu_itemChecked{{endif}}" data-noSelect="true">
								<a href='{$table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )}' data-ipsDialog data-ipsDialog-title='{lang="custom_sort"}'>{lang="custom"}</a>
							</li>
						{{endif}}
					</ul>
					{{elseif $table->advancedSearch}}
						<a href='{$table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )}' data-ipsDialog data-ipsDialog-title='{lang="custom_sort"}'>{lang="custom"}</a>
					{{endif}}
				</li>
			{{endif}}
			{{if !empty( $table->filters )}}
				<li>
					<a href="#elFilterByMenu_{$table->uniqueId}_menu" data-role="tableFilterMenu" id="elFilterByMenu_{$table->uniqueId}" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active" data-ipsMenu-selectable="radio">{lang="filter_by"} <i class="fa fa-caret-down"></i></a>
					<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide' id='elFilterByMenu_{$table->uniqueId}_menu'>
						<li data-action="tableFilter" data-ipsMenuValue='' class='ipsMenu_item {{if !$table->filter}}ipsMenu_itemChecked{{endif}}'>
							<a href='{$table->baseUrl->setQueryString( array( 'filter' => '', 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection, 'page' => '1' ) )}'>{lang="{$table->langPrefix}all"}</a>
						</li>
						{{foreach $table->filters as $k => $q}}
							<li data-action="tableFilter" data-ipsMenuValue='{$k}' class='ipsMenu_item {{if $k === $table->filter}}ipsMenu_itemChecked{{endif}}'>
								<a href='{$table->baseUrl->setQueryString( array( 'filter' => $k, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection, 'page' => '1' ) )}'>{lang="{$table->langPrefix}{$k}"}</a>
							</li>
						{{endforeach}}
					</ul>
				</li>
			{{endif}}
		</ul>
        
		<ul class='ipsButtonRow ipsPos_right ipsClearfix'>
			<li>
				<a href='{$table->baseUrl->setQueryString( array( 'listType' => 'thumb', 'csrfKey' => \IPS\Session::i()->csrfKey ) )}' data-ipsTooltip title='Set as thumbnail' class='{{if !isset( \IPS\Request::i()->cookie['listType'] ) OR \IPS\Request::i()->cookie['listType'] == 'thumb' }}ipsButtonRow_active{{endif}}'><i class='fa fa-th-large'></i></a>
			</li>
			<li>
				<a href='{$table->baseUrl->setQueryString( array( 'listType' => 'list', 'csrfKey' => \IPS\Session::i()->csrfKey ) )}' data-ipsTooltip title='Set as list' class='{{if isset( \IPS\Request::i()->cookie['listType'] ) AND \IPS\Request::i()->cookie['listType'] == 'list' }}ipsButtonRow_active{{endif}}'><i class='fa fa-th-list'></i></a>
			</li>
		</ul>       
		
		{{if $table->pages > 1}}
			<div data-role="tablePagination">
				{template="pagination" group="global" app="core" location="global" params="$table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey()"}
			</div>
		{{endif}}
	</div>
	{{endif}}

	{{if $table->canModerate()}}
		<form action="{$table->baseUrl}" method="post" data-role='moderationTools' data-ipsPageAction>
        <input type="hidden" name="csrfKey" value="{expression="\IPS\Session::i()->csrfKey"}" />
	{{endif}}
		{{if count( $rows )}}
            <div class='ipsAreaBackground'>
    			<ol class='ipsGrid ipsDataList ipsClear {{foreach $table->classes as $class}}{$class} {{endforeach}}' id='elTable_{$table->uniqueId}' data-role="tableRows" itemscope itemtype="http://schema.org/ItemList">
    				{template="$table->rowsTemplate[1]" params="$table, $headers, $rows" object="$table->rowsTemplate[0]"}
    			</ol>
            </div>
		{{else}}
			<div class='ipsType_center ipsPad'>
				<p class='ipsType_large ipsType_light'>{lang="no_rows_in_table"}</p>
				{{if method_exists( $table, 'container' ) AND $table->container() !== NULL}}
					{{if $table->container()->can('add')}}
						<a href='{$table->container()->url()->setQueryString( 'do', 'add' )}' class='ipsButton ipsButton_primary ipsButton_medium'>
							{lang="submit_first_row"}
						</a>
					{{endif}}
				{{endif}}
			</div>
		{{endif}}
				
	{{if $table->canModerate()}}
			<div class="ipsAreaBackground ipsPad ipsClearfix" data-role="pageActionOptions">
				<div class="ipsPos_right">
					<select name="modaction" data-role="moderationAction">
						{{if $table->canModerate('unhide')}}
							<option value='approve' data-icon='check-circle'>{lang="approve"}</option>
						{{endif}}
						{{if $table->canModerate('feature') or $table->canModerate('unfeature')}}
							<optgroup label="{lang="feature"}" data-icon='star' data-action='feature'>
								{{if $table->canModerate('feature')}}
									<option value='feature'>{lang="feature"}</option>
								{{endif}}
								{{if $table->canModerate('unhide')}}
									<option value='unfeature'>{lang="unfeature"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('pin') or $table->canModerate('unpin')}}
							<optgroup label="{lang="pin"}" data-icon='thumb-tack' data-action='pin'>
								{{if $table->canModerate('pin')}}
									<option value='pin'>{lang="pin"}</option>
								{{endif}}
								{{if $table->canModerate('unpin')}}
									<option value='unpin'>{lang="unpin"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('hide') or $table->canModerate('unhide')}}
							<optgroup label="{lang="hide"}" data-icon='eye' data-action='hide'>
								{{if $table->canModerate('hide')}}
									<option value='hide'>{lang="hide"}</option>
								{{endif}}
								{{if $table->canModerate('unhide')}}
									<option value='unhide'>{lang="unhide"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('lock') or $table->canModerate('unlock')}}
							<optgroup label="{lang="lock"}" data-icon='lock' data-action='lock'>
								{{if $table->canModerate('lock')}}
									<option value='lock'>{lang="lock"}</option>
								{{endif}}
								{{if $table->canModerate('unlock')}}
									<option value='unlock'>{lang="unlock"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('move')}}
							<option value='move' data-icon='arrow-right'>{lang="move"}</option>
						{{endif}}
						{{if $table->canModerate('split_merge')}}
							<option value='merge' data-icon='level-up'>{lang="merge"}</option>
						{{endif}}
						{{if method_exists( $table, 'customActions' )}}
							{{foreach $table->customActions() as $action}}
								{{if is_array( $action['action'] ) }}
									<optgroup label="{lang="$action['grouplabel']"}" data-icon='{$action['icon']}' data-action='{$action['groupaction']}'>
										{{foreach $action['action'] as $_action}}
											<option value='{$_action['action']}'>{lang="$_action['label']"}</option>
										{{endforeach}}
									</optgroup>
								{{else}}
									<option value='{$action['action']}' data-icon='{$action['icon']}'>{lang="$action['label']"}</option>
								{{endif}}
							{{endforeach}}
						{{endif}}
						{{if $table->savedActions}}
							<optgroup label="{lang="saved_actions"}" data-icon='tasks' data-action='saved_actions'>
								{{foreach $table->savedActions as $k => $v}}
									<option value='savedAction-{$k}'>{$v}</option>
								{{endforeach}}
							</optgroup>
						{{endif}}
						{{if $table instanceof \IPS\core\Followed\Table}}
							<optgroup label="{lang="adjust_follow"}" data-icon='bell' data-action='adjust_follow'>
								<option value='follow_immediate'>{lang="follow_type_immediate_prefixed"}</option>
								<option value='follow_daily'>{lang="follow_type_daily_prefixed"}</option>
								<option value='follow_weekly'>{lang="follow_type_weekly_prefixed"}</option>
								<option value='follow_none'>{lang="follow_type_none"}</option>
							</optgroup>
							<optgroup label="{lang="adjust_follow_privacy"}" data-icon='ban' data-action='adjust_follow_privacy'>
								<option value='follow_public'>{lang="follow_public"}</option>
								<option value='follow_anonymous'>{lang="follow_anonymous"}</option>
							</optgroup>
							<option value='unfollow' data-icon='times'>{lang="unfollow"}</option>
						{{endif}}
						{{if $table->canModerate('delete')}}
							<option value='delete' data-icon='times-circle'>{lang="delete"}</option>
						{{endif}}
					</select>
					<button type="submit" class="ipsButton ipsButton_alternate ipsButton_verySmall">{lang="submit"}</button>
				</div>
			</div>
		</form>
	{{endif}}
	{{if $table->pages > 1}}
	<div class="ipsButtonBar ipsPad_half ipsClearfix ipsClear">
		<div data-role="tablePagination">
			{template="pagination" group="global" app="core" location="global" params="$table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey()"}
		</div>
	</div>
	{{endif}}
</div>]]></template>
 <template template_group="browse" template_name="videoThumbRow" template_data="$table, $headers, $rows" template_location="front" template_app="videos"><![CDATA[{{foreach $rows as $row}}
	<li class="ipsGrid_span3 ipsType_center ipsAreaBackground_reset ipsType_blendLinks ipsClearfix ipsPad_half {{if $row->unread()}}ipsDataItem_unread{{endif}} {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if $row->hidden()}}ipsModerated{{endif}}">						
    	{template="thumb" group="global" app="videos" params="$row"}
		<div class='ipsSpacer_top ipsSpacer_half'>
			<h3 class='ipsType_normal ipsType_reset ipsTruncate ipsTruncate_line' data-ipsTruncate data-ipsTruncate-size='1 lines' data-ipsTruncate-type='remove'>
                <a href='{$row->url()}'>{$row->title}</a>
			</h3>
			<span class='ipsType_light ipsType_small'>{lang="videos_by"}: {$row->author()->link()|raw} &middot; {datetime="$row->date" dateonly="true"}</span>           		

            {{if $table->canModerate()}}
                <div class='ipsPos_right'>
     				<a href='#elVideo{$row->tid}_menu' id='elVideo{$row->tid}' class='ipsType_large ipsPos_middle ipsType_blendLinks' data-ipsMenu>
    					<i class='fa fa-cog'></i> <i class='fa fa-caret-down'></i>
    				</a>
    				<input type='checkbox' data-role='moderation' name="moderate[{$row->tid}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state='{$row->tableStates()}'>
           
    				<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide' id='elVideo{$row->tid}_menu'>
    					{{if $row->canEdit()}}				
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'edit' ) )}' title='{lang="video_edit_details_title"}'>{lang="video_edit_details"}</a></li>
    					{{endif}}
    					{{if $row->canHide()}}				
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'hide' ) )}' title='{lang="hide_title_video"}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
    					{{endif}}
    					{{if $row->canUnhide()}}				
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unhide' ) )}' title='{{if $row->hidden() === 1}}{lang="approve_title_video"}{{else}}{lang="unhide_title_video"}{{endif}}'>{{if $row->hidden() === 1}}{lang="approve"}{{else}}{lang="unhide"}{{endif}}</a></li>
    					{{endif}}                            
    					{{if $row->canFeature()}}				
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'feature' ) )}' title='{lang="feature_title_video"}'>{lang="feature"}</a></li>
    					{{endif}}
    					{{if $row->canUnfeature()}}				
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unfeature' ) )}' title='{lang="unfeature_title_video"}'>{lang="unfeature"}</a></li>
    					{{endif}}
    					{{if $row->canMove()}}				
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'move' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="move"}"  title='{lang="video_move_title"}'>{lang="move"}</a></li>
    					{{endif}}
    					{{if $row->canDelete()}}	
                            <li class='ipsMenu_sep'></li>			
    						<li class='ipsMenu_item'><a href='{$row->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete' ) )}' data-confirm  title='{lang="video_delete_title"}'>{lang="delete"}</a></li>
    					{{endif}}
    				</ul> 
                </div>       
      		{{endif}}   
        </div>          			                     
	</li>   
{{endforeach}}]]></template>
 <template template_group="comments" template_name="commentList" template_data="$table" template_location="front" template_app="videos"><![CDATA[{template="pageHeader" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack('module__videos_comments')"}

<div class='ipsBox'>
	{$table|raw}
</div>]]></template>
 <template template_group="comments" template_name="commentRow" template_data="$table, $headers, $rows" template_location="front" template_app="videos"><![CDATA[{{foreach $rows as $row}}
	<li class="ipsDataItem {{if $row->approved !== 1}}ipsFaded ipsFaded_withHover{{endif}} ipsDataItem_unread {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if !$row->approved}}ipsModerated{{endif}}">

		<div class='ipsDataItem_icon ipsPos_top ipsResponsive_hidePhone'>
			{template="userPhoto" app="core" group="global" params="$row->author(), 'tiny'"}
		</div>
		<div class='ipsDataItem_main'>
			<h4 class='ipsDataItem_title'>				
				<a href='{$row->url()}' title='{lang="view_entry"}'>
					{lang="videos_in"}: {$row->item()->title}
				</a>
			</h4>
			<p class='ipsType_reset ipsType_light'>{lang="byline" sprintf="$row->author()->name"}{datetime="$row->date_added" dateonly="true"}</p>
			<div class='ipsDataItem_meta'>
				<br>
				<div class='ipsType_richText ipsType_medium' data-ipsTruncate data-ipsTruncate-size='5 lines' data-ipsTruncate-type='hide'>
					{$row->text|raw}
				</div>               

			</div>
		</div>
	</li>
{{endforeach}}]]></template>
 <template template_group="global" template_name="commentTableHeader" template_data="$comment, $video" template_location="front" template_app="videos"><![CDATA[
<div class='ipsDataList ipsAreaBackground_light ipsClearfix'>
	<div class='ipsDataItem'>
		<div class='ipsDataItem_generic ipsDataItem_size2'>
			{template="thumbImage" group="global" app="core" params="\IPS\File::get( 'videos_Thumbs', $video->thumbnail )->url, $video->title, '', 'cSearchActivity_image', 'view_this', $video->url()"}
		</div>
		<div class='ipsDataItem_main'>
			<h3 class='ipsType_sectionHead'><a href='{$video->url()}' title='{lang="view_this_video" sprintf="$video->title"}'>{$video->mapped('title')}</a></h3>
			<p class='ipsType_normal ipsType_light ipsType_blendLinks ipsType_reset'>{lang="videos_in"} <a href='{$video->container()->url()}'>{$video->container()->_title}</a></p>
		</div>
	</div>
</div>]]></template>
 <template template_group="global" template_name="snippet" template_data="$activity, $type='activity'" template_location="front" template_app="videos"><![CDATA[
{{if $activity instanceof \IPS\videos\Video\Comment}}
	{{$item = $activity->item();}}
{{else}}
	{{$item = $activity;}}
{{endif}}

<div class='cSearchActivity_info ipsContained'>
	<div class='ipsColumns'>
		<div class='ipsColumn ipsColumn_narrow'>
		{template="thumbImage" group="global" app="core" params="\IPS\File::get( 'videos_Thumbs', $item->thumbnail )->url, $item->title, '', 'cSearchActivity_image', 'view_this', $item->url()"}
		</div>
		<div class='ipsColumn ipsColumn_fluid'>
			{{if $activity instanceof \IPS\videos\Video\Comment}}
				<div class='ipsType_medium ipsType_richText ipsContained ipsSpacer_bottom ipsSpacer_half' data-ipsTruncate data-ipsTruncate-size='3 lines' data-ipsTruncate-type='remove'>
					{$activity->truncated()|raw}
				</div>
				<ul class='ipsList_inline ipsType_light'>
					{{if $type != 'search' and $activity instanceof \IPS\Content\Reputation and settings.reputation_enabled}}
						<li>{template="reputationMini" group="global" app="core" params="$activity, '', NULL, TRUE"}</li>
					{{endif}}
				</ul>
			{{else}}
				{{if $type != 'search'}}<a href='{$item->url()}' class='ipsType_normal ipsType_break'>{$item->mapped('title')}</a>{{endif}}
				<div class='ipsType_medium ipsType_richText ipsContained ipsSpacer_both ipsSpacer_half' data-ipsTruncate data-ipsTruncate-size='3 lines' data-ipsTruncate-type='remove'>
					{$item->truncated()|raw}
				</div>
				<ul class='ipsList_inline ipsType_light'>
					<li>{lang="num_video_views" pluralize="$item->views"}</li>
					{{if settings.vs_enable_comments AND member.group['g_vs_view_comments']}}
						<li>{lang="num_video_comments" pluralize="$item->num_comments"}</li>
					{{endif}}
					{{if $type != 'search' and $item instanceof \IPS\Content\Reputation and settings.reputation_enabled}}
						<li>{template="reputationMini" group="global" app="core" params="$item, '', NULL, TRUE"}</li>
					{{endif}}
				</ul>
			{{endif}}
		</div>
	</div>
</div>]]></template>
 <template template_group="global" template_name="thumb" template_data="$video, $size=''" template_location="front" template_app="videos"><![CDATA[{{$thumbDims = explode( ',', settings.vs_standard_thumbnail );}} 
<a href='{$video->url()}'>
{{if $video->thumbnail}}
	<div class='ipsThumb {{if $size}}ipsThumb_{$size}{{endif}} ipsThumb_bg' style='{{if isset( $thumbDims[0] ) AND !$size}}width: 100%; height: {{if isset( $thumbDims[1] ) AND $thumbDims[1]}}{$thumbDims[1]}{{else}}140{{endif}}px;{{endif}} background-image: url( {file="$video->thumbnail" extension="videos_Thumbs"} );'>
		<img src='{file="$video->thumbnail" extension="videos_Thumbs"}' alt='' class=''>
	</div>                        
{{else}}
    <div class='ipsNoThumb ipsThumb ipsThumb_{$size}' {{if isset( $thumbDims[0] ) AND !$size}}style='{{if isset( $thumbDims[0] ) AND !$size}}width: 100%; height: {{if isset( $thumbDims[1] ) AND $thumbDims[1]}}{$thumbDims[1]}{{else}}140{{endif}}px;{{endif}}'{{endif}}></div>
{{endif}}
</a>]]></template>
 <template template_group="global" template_name="video" template_data="$video" template_location="front" template_app="videos"><![CDATA[{{if $video->video_type == 'media_upload' OR $video->video_type == 'media_upload_url'}}
    <video id="video{$video->tid}" width="100%" preload controls>
    	<source src="{file="$video->video_data" extension="videos_Videos"}" />
    </video>        
{{else}} 
    {$video->embed|raw}
{{endif}}]]></template>
 <template template_group="index" template_name="index" template_data="$videos, $featured" template_location="front" template_app="videos"><![CDATA[{template="pageHeader" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack('module__videos_videos')"}

{{if !empty( $featured )}}
	<div class='ipsBox ipsSpacer_bottom'>
		<h2 class='ipsType_sectionTitle ipsType_reset'>{lang="featured_videos"}</h2>
		<section id='elVideosFeatured'>
			<div class='ipsCarousel ipsClearfix' data-ipsCarousel data-ipsCarousel-fullSizeItems data-ipsCarousel-slideshow data-ipsCarousel-shadows='false'>
				<ul class='cDownloadsCarousel ipsClearfix' data-role="carouselItems">
					{{foreach $featured as $video}}
						{template="featuredVideo" group="browse" app="videos" params="$video"}
					{{endforeach}}
				</ul>
				<span class='ipsCarousel_shadow ipsCarousel_shadowLeft'></span>
				<span class='ipsCarousel_shadow ipsCarousel_shadowRight'></span>
				<a href='#' class='ipsCarousel_nav ipsHide' data-action='prev'><i class='fa fa-chevron-left'></i></a>
				<a href='#' class='ipsCarousel_nav ipsHide' data-action='next'><i class='fa fa-chevron-right'></i></a>
			</div>
		</section>
	</div>
{{endif}}

<div class='ipsBox ipsClear ipsClearfix'>
<h2 class='ipsType_sectionTitle ipsType_reset'>New Videos</h2>
	<ul class='ipsGrid ipsPad' data-ipsGrid data-ipsGrid-minItemSize='220' data-ipsGrid-maxItemSize='400'>
    
    {{if count( $videos )}}
		{{foreach $videos as $idx => $row}}            
			{{if $idx < 5}}
				<li class='ipsGrid_span3'>
                    
                    <div class='ipsType_center'>
                     <img id='thumbnail' src='http://localhost/ipb340/uploads/videos/thumbnails/{$row->thumbnail}' width='220px' height='120px' class='ipsThumb ipsThumb_large ' /> 
                    </div>

					<div class='ipsType_center'>
						<h4 class='ipsTruncate ipsTruncate_line'><a href='{$row->url()}'>{$row->title}</a></h4>
						<span class='ipsType_light ipsType_small'>By: {$row->author()->link()|raw} &middot; {datetime="$row->date" dateonly="true"}</span>
					</div>
				</li>
			{{endif}}
		{{endforeach}}
    {{else}}
    	<p class='ipsType_reset'>{lang="no_new_videos"}</p>
    {{endif}}
</ul>
</div>]]></template>
 <template template_group="submit" template_name="categorySelect" template_data="$form" template_location="front" template_app="videos"><![CDATA[
{{if !\IPS\Request::i()->isAjax()}}
	{template="pageHeader" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack('videos_select_category')"}
{{else}}
	<div class='ipsPad'>
{{endif}}
	{$form|raw}
{{if \IPS\Request::i()->isAjax()}}
	</div>
{{endif}}]]></template>
 <template template_group="submit" template_name="formPage" template_data="$category, $form" template_location="front" template_app="videos"><![CDATA[{template="pageHeader" group="global" app="core" params="$category->_title"}

<div class='ipsBox ipsPad'>
<div class='ipsType_normal ipsType_richText'>
	{$form|raw}
</div>
</div>]]></template>
 <template template_group="view" template_name="commentRow" template_data="$table, $headers, $rows" template_location="front" template_app="videos"><![CDATA[{{foreach $rows as $row}}
	<li class="ipsDataItem {{if $row->approved !== 1}}ipsFaded ipsFaded_withHover{{endif}} ipsDataItem_unread {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if !$row->approved}}ipsModerated{{endif}}">

		<div class='ipsDataItem_icon ipsPos_top ipsResponsive_hidePhone'>
			{template="userPhoto" app="core" group="global" params="$row->author(), 'tiny'"}
		</div>
		<div class='ipsDataItem_main'>
			<h4 class='ipsDataItem_title'>				
				<a href='{$row->url()}' title='{lang="view_entry"}'>
					{lang="videos_in"}: {$row->item()->title}
				</a>
			</h4>
			<p class='ipsType_reset ipsType_light'>{lang="byline" sprintf="$row->author()->name"}{datetime="$row->date" dateonly="true"}</p>
			<div class='ipsDataItem_meta'>
				<br>
				<div class='ipsType_richText ipsType_medium' data-ipsTruncate data-ipsTruncate-size='4 lines' data-ipsTruncate-type='remove'>
					{$row->text|raw}
				</div>               

			</div>
		</div>
	</li>
{{endforeach}}]]></template>
 <template template_group="view" template_name="comments" template_data="$entry" template_location="front" template_app="videos"><![CDATA[<div class='' data-controller='core.front.core.commentFeed' data-baseURL='{$entry->url()}' {{if $entry->isLastPage()}}data-lastPage{{endif}} data-feedID='event-{$entry->id}' id='comments'>
	{{if $entry->commentPageCount() > 1}}
		{$entry->commentPagination( array( 'tab' ) )|raw}
		<br><br>
	{{endif}}
	<div data-role='commentFeed' data-controller='core.front.core.moderation'>
		{{if ( $comments = $entry->comments() and count( $comments ) )}}
			<form action="{$entry->url()->setQueryString( 'do', 'multimodComment' )}" method="post" data-ipsPageAction data-role='moderationTools'>
				{{$commentCount=0; $timeLastRead = $entry->timeLastRead(); $lined = FALSE;}}
				{{foreach $comments as $comment}}
					{{if !$lined and $timeLastRead and $timeLastRead->getTimestamp() < $comment->mapped('date')}}
						{{if $lined = TRUE and $commentCount}}
							<hr class="ipsCommentUnreadSeperator">
						{{endif}}
					{{endif}}
					{{$commentCount++;}}
					{$comment->html()|raw}
				{{endforeach}}
				{template="commentMultimod" app="core" group="global" params="$entry"}
			</form>
		{{else}}
			<p class='ipsType_normal ipsType_light ipsType_center' data-role='noComments'>{lang="no_comments"}</p>
		{{endif}}
	</div>
	{{if $entry->commentPageCount() > 1}}
		<hr class='ipsHr'>
		{$entry->commentPagination( array( 'tab' ) )|raw}
	{{endif}}
	{{if $entry->commentForm() || $entry->locked() || \IPS\Member::loggedIn()->restrict_post || \IPS\Member::loggedIn()->members_bitoptions['unacknowledged_warnings']}}
		<a id='replyForm'></a>
		<div data-role='replyArea' class='ipsBox ipsBox_transparent ipsAreaBackground ipsPad {{if !$entry->canComment()}}cTopicPostArea_noSize{{endif}} ipsSpacer_top'>
			{{if $entry->commentForm()}}
				{{if $entry->locked()}}
					<p class='ipsType_reset ipsType_warning ipsComposeArea_warning ipsSpacer_bottom ipsSpacer_half'><i class='fa fa-info-circle'></i> {lang="event_locked_can_comment"}</p>
				{{endif}}
				{$entry->commentForm()|raw}
				{{else}}
				{{if $entry->locked()}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'event_locked_cannot_comment'"}
				{{elseif \IPS\Member::loggedIn()->restrict_post}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'restricted_cannot_comment', \IPS\Member::loggedIn()->warnings(5,NULL,'rpa'), \IPS\Member::loggedIn()->restrict_post"}
				{{elseif \IPS\Member::loggedIn()->members_bitoptions['unacknowledged_warnings']}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'unacknowledged_warning_cannot_post', \IPS\Member::loggedIn()->warnings( 1, FALSE )"}
				{{endif}}
			{{endif}}
		</div>
	{{endif}}
</div>]]></template>
 <template template_group="view" template_name="view" template_data="$video" template_location="front" template_app="videos"><![CDATA[<div class='ipsType_pageTitle'>
    <div class='ipsPos_right ipsResponsive_noFloat ipsResponsive_hidePhone'>
    	{template="follow" app="core" group="global" params="'videos', 'video', $video->tid, $video->followers()->count( TRUE )"}
    </div>

	{{if $video->prefix()}}
		{template="prefix" group="global" app="core" params="$video->prefix( TRUE ), $video->prefix()"}
	{{endif}}

	<span itemprop='name'>{$video->title}</span>
	{{if $video->hidden() === 1}}
		<span class="ipsBadge ipsBadge_icon ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span>
	{{elseif $video->hidden() === -1}}
		<span class="ipsBadge ipsBadge_icon ipsBadge_warning" data-ipsTooltip title='{$video->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span>
	{{endif}}       
	{{if $video->mapped('featured')}}
		<span class="ipsBadge ipsBadge_icon ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span>
	{{endif}}    
</div>

<div class="ipsDataItem ipsSpacer_bottom">
	<div class='ipsDataItem_icon ipsPos_top ipsResponsive_hidePhone'>
		{template="userPhoto" app="core" group="global" params="$video->author(), 'tiny'"}
	</div>
	<div class='ipsDataItem_main ipsType_normal'>				
        {lang="byline" sprintf="$video->author()->name"}{datetime="$video->__get( $video::$databaseColumnMap['date'] )" dateonly="true"}          
     
    	<ul class='ipsList_inline ipsType_small'>
    		<li><i class='fa fa-eye'></i> {lang="num_video_views" pluralize="$video->views"}</li>    
            {{if settings.vs_enable_comments AND member.group['g_vs_view_comments']}}                        
    		    <li><i class='fa fa-comment'></i> {lang="num_video_comments" pluralize="$video->num_comments"}</li>
            {{endif}}
    		<li>
        </ul> 
        
		<div class='ipsClearfix ipsResponsive_hidePhone ipsSpacer_top ipsSpacer_half'>
			{$video->rating()|raw}
		</div>          
        
		{{if count( $video->tags() )}}		
			{template="tags" group="global" app="core" params="$video->tags()"}
		{{endif}}        
    </div>
</div>     
        
<div class='ipsClearfix ipsSpacer_bottom'>
    <div class='ipsType_normal ipsType_richText ipsContained'>
        {{if settings.vs_extra_videos AND $extraVideo = $video->getExtraVideo()}}
            {$extraVideo|raw}
        {{else}}
            {template="video" group="global" app="videos" params="$video"}
        {{endif}}
        
        {{if settings.vs_extra_videos AND count( $video->extraVideos() )}}
    		<ul class='ipsButton_split ipsSpacer_top'>
                <li><a href='{$video->url()}' class='ipsButton {{if !isset( \IPS\Request::i()->extra )}}ipsButton_primary{{else}}ipsButton_light{{endif}} '>{lang="extra_video_main"}</a></li>
                {{foreach $video->extraVideos() as $id => $_video}}
      			   <li><a href='{$video->url()->setQueryString( array( 'extra' => $id ) )}' class='ipsButton {{if isset( \IPS\Request::i()->extra ) && \IPS\Request::i()->extra == $id}}ipsButton_primary{{else}}ipsButton_light{{endif}} '>{$_video['key']}</a></li>
                {{endforeach}}
     		</ul>           
        {{endif}}       
    </div> 
    
	{{if $video instanceof \IPS\Content\Reputation and settings.reputation_enabled}}
		<div class='ipsSpacer_top ipsPos_right'>
			{template="reputation" app="core" group="global" params="$video"}
		</div>
	{{endif}}       
     
    {{if $video->description}}       
        <div class='ipsSpacer_top ipsBox ipsBox_container ipsType_normal ipsType_richText' data-ipsTruncate data-ipsTruncate-size='3 lines' data-ipsTruncate-type='hide'>
            {$video->description|raw}
        </div> 
    {{endif}}  

	<ul class='ipsToolList ipsToolList_horizontal ipsSpacer_both ipsPos_left ipsClearfix ipsResponsive_noFloat'>
		{{if $video->canEdit() or $video->canHide() or $video->canUnhide() or $video->canFeature() or $video->canUnfeature() or $video->canMove() or $video->canDelete()}}
			<li>
				<a href='#elVideoActions_menu' id='elVideoActions' class='ipsButton ipsButton_light ipsButton_verySmall ipsButton_fullWidth' data-ipsMenu>Manage <i class='fa fa-caret-down'></i></a>
				<ul id='elVideoActions_menu' class='ipsMenu ipsMenu_auto ipsHide'>
					{{if $video->canEdit()}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'edit' ) )}' title='{lang="video_edit_details_title"}'>{lang="video_edit_details"}</a></li>
					{{endif}}
					{{if $video->canHide()}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'hide' ) )}' title='{lang="hide_title_video"}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
					{{endif}}
					{{if $video->canUnhide()}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unhide' ) )}' title='{{if $video->hidden() === 1}}{lang="approve_title_video"}{{else}}{lang="unhide_title_video"}{{endif}}'>{{if $video->hidden() === 1}}{lang="approve"}{{else}}{lang="unhide"}{{endif}}</a></li>
					{{endif}}                            
					{{if $video->canFeature() AND !$video->featured}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'feature' ) )}' title='{lang="feature_title_video"}'>{lang="feature"}</a></li>
					{{endif}}
					{{if $video->canUnfeature() AND $video->featured}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unfeature' ) )}' title='{lang="unfeature_title_video"}'>{lang="unfeature"}</a></li>
					{{endif}}
					{{if $video->canMove()}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'move' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="move"}"  title='{lang="video_move_title"}'>{lang="move"}</a></li>
					{{endif}}
					{{if $video->canDelete()}}				
						<li class='ipsMenu_item'><a href='{$video->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete' ) )}' data-confirm  title='{lang="video_delete_title"}'>{lang="delete"}</a></li>
					{{endif}}
				</ul>
			</li>
		{{endif}}
		{{if !\IPS\Member::loggedIn()->group['gbw_no_report'] }}
			<li>
				<a href='{$video->url('report')}' data-ipsDialog data-ipsDialog-size='medium' data-ipsDialog-title="{lang="report_video"}" data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage="{lang="report_submit_success"}" title="{lang="report_video"}" class='ipsButton ipsButton_link ipsButton_verySmall ipsButton_fullWidth'>{lang="report_video"}</a>
			</li>
		{{endif}}
		{{if $video->topic() }}
			<li>
				<a href='{$video->topic()->url()}' title="{lang="video_discussion_topic_title"}" class='ipsButton ipsButton_link ipsButton_verySmall ipsButton_fullWidth'>{lang="video_discussion_topic"}</a>
			</li>
		{{endif}}        
	</ul>                       
</div> 

{{if settings.vs_enable_comments AND member.group['g_vs_view_comments']}} 
	<a id="replies"></a>
	<h2 class='ipsType_sectionTitle ipsType_reset'>{lang="video_comments"}</h2>
	{template="comments" app="videos" group="view" params="$video"}
{{endif}}  

<div class='ipsGrid ipsGrid_collapsePhone ipsPager ipsClearfix ipsSpacer_top'>
	<div class="ipsGrid_span6 ipsType_left ipsPager_prev">
		<a href="{$video->container()->url()}" title="{lang="go_to_video_category" sprintf="$video->container()->_title"}" rel="up">
			<span class="ipsPager_type">{lang="go_back_to_video_category"}</span>
			<span class="ipsPager_title ipsType_light ipsType_break">{lang="$video->container()->_title" wordbreak="true"}</span>
		</a>
	</div>
</div>

{{if count( $video->shareLinks() )}}
    <hr class='ipsHr'>        
	{template="sharelinks" app="core" group="global" params="$video"}
{{endif}}]]></template>
 <template template_group="widgets" template_name="videosComments" template_data="$comments, $orientation='vertical'" template_location="front" template_app="videos"><![CDATA[{{if settings.vs_enable_comments AND member.group['g_vs_view_comments']}}
    <h3 class='ipsWidget_title ipsType_reset'>{lang="block_videosComments"}</h3>
    <div class='ipsWidget_inner'>
    {{if $orientation == 'vertical'}}
    	<div class='ipsPad_half'>
            {{if count( $comments )}}        
        		<ul class='ipsDataList ipsDataList_reducedSpacing'>
        			{{foreach $comments as $row}}
        				<li class='ipsDataItem'>
        					<div class='ipsDataItem_icon ipsPos_top'>
        						{template="userPhoto" group="global" app="core" params="$row->author(), 'tiny'"}
        					</div>
        					<div class='ipsDataItem_main'>
        						<a href="{$row->url()}" class='ipsDataItem_title ipsType_break'>{wordbreak="$row->item()->title"}</a><br>
        						<span class='ipsType_light ipsType_small'>{lang="videos_by"}: {$row->author()->link()|raw} &middot; {datetime="$row->date_added" dateonly="true"}</span>
        						<div class='ipsType_small ipsType_textBlock ipsType_richText ipsType_break' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='6 lines'>
        							{$row->truncated( true )|raw}
        						</div>
        					</div>
        				</li>
        			{{endforeach}}
        			<li class='ipsDataItem'>
        				<div class='ipsDataItem_main ipsType_small ipsType_light ipsType_center'>
                            <a href='{url="app=videos&module=videos&controller=comments" seoTemplate="videos_comments"}'>{lang="view_all_comments"}</a>
        				</div>
        			</li>                
        		</ul>
    		{{else}}
    			<p class='ipsType_reset'>{lang="no_new_video_comments"}</p>
    		{{endif}}          
    	</div>
    {{else}}
    		{{if count( $comments )}}
        		<ul class='ipsGrid ipsGrid_collapsePhone ipsWidget_columns'>
        			{{foreach $comments as $idx => $row}}
        				{{if $idx < 4}}
        					<li class='ipsDataItem ipsGrid_span3'>
        						<div class='ipsDataItem_icon ipsPos_top'>
        							{template="userPhoto" group="global" app="core" params="$row->author(), 'tiny'"}
        						</div>
        						<div class='ipsDataItem_main'>
        							<a href="{$row->url()}" class='ipsDataItem_title ipsType_break'>{wordbreak="$row->item()->title"}</a><br>
        							<span class='ipsType_light ipsType_small'>{lang="videos_by"}: {$row->author()->link()|raw} &middot; {datetime="$row->date_added" dateonly="true"}</span>
        							<div class='ipsType_small ipsType_textBlock ipsType_richText ipsType_break' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='2 lines'>
        								{$row->truncated( true )|raw}
        							</div>
        						</div>
        					</li>						
        				{{endif}}
        			{{endforeach}}
        		</ul>
    		{{else}}
    			<p class='ipsType_reset'>{lang="no_new_video_comments"}</p>
    		{{endif}}        
    {{endif}}
    </div>
{{endif}}]]></template>
 <template template_group="widgets" template_name="videosStats" template_data="$stats, $latestVideo, $orientation='vertical'" template_location="front" template_app="videos"><![CDATA[<h3 class='ipsType_reset ipsWidget_title'>{lang="block_videosStats"}</h3>
<div class='ipsWidget_inner'>
	{{if $orientation == 'vertical'}}
		<div class='ipsPad_half'>
			<ul class='ipsDataList' id='elVideoStats'>
				<li class='ipsDataItem'>
					<div class='ipsDataItem_main ipsPos_middle'>
						<strong>{lang="total_videos"}</strong>
					</div>
					<div class='ipsDataItem_stats ipsDataItem_statsLarge'>
						<span class='ipsDataItem_stats_number'>{number="$stats['totalVideos']"}</span>
					</div>
				</li>
				<li class='ipsDataItem'>
					<div class='ipsDataItem_main ipsPos_middle'>
						<strong>{lang="total_video_submitters"}</strong>
					</div>
					<div class='ipsDataItem_stats ipsDataItem_statsLarge'>
						<span class='ipsDataItem_stats_number'>{number="$stats['totalSubmitters']"}</span>
					</div>
				</li>                
				{{if settings.vs_enable_comments AND $stats['totalComments']}}
					<li class='ipsDataItem'>
						<div class='ipsDataItem_main ipsPos_middle'>
							<strong>{lang="total_video_comments"}</strong>
						</div>
						<div class='ipsDataItem_stats ipsDataItem_statsLarge'>
							<span class='ipsDataItem_stats_number'>{number="$stats['totalComments']"}</span>
						</div>
					</li>
				{{endif}}
				<li class='ipsDataItem'>
					<div class='ipsDataItem_main ipsPos_middle'>
						<strong>{lang="total_video_views"}</strong>
					</div>
					<div class='ipsDataItem_stats ipsDataItem_statsLarge'>
						<span class='ipsDataItem_stats_number'>{number="$stats['totalViews']"}</span>
					</div>
				</li>
			</ul>
			<hr class='ipsHr'>
			{{if $latestVideo}}
				<div id='elVideoStatsLatest' class='ipsClearfix'>
					<span class='ipsPos_left'>{template="userPhoto" group="global" app="core" params="$latestVideo->author(), 'small'"}</span>
					<div class='ipsWidget_latestItem'>
						<strong class='ipsType_small ipsType_uppercase'>{lang="latest_video"}</strong><br>
						<a href="{$latestVideo->url()}" class='ipsTruncate ipsTruncate_line'>{wordbreak="$latestVideo->title"}</a>
						<span class='ipsType_light ipsType_medium'>{lang="byline_nodate" htmlsprintf="$latestVideo->author()->link()"}</span>
					</div>
				</div>
			{{endif}}
		</div>
	{{else}}
		{{$columns = 4;}}
		{{$columns += ( settings.vs_enable_comments AND $stats['totalComments'] ) ? 2 : 0;}}
		{{$span = 12 / $columns;}}
		<div class='ipsGrid ipsGrid_collapsePhone ipsWidget_stats'>
			<div class='ipsGrid_span{$span} ipsType_center cVideoWidget_statsNumber'>
				<span class='ipsType_large ipsWidget_statsCount'>{number="$stats['totalVideos']"}</span><br>
				<span class='ipsType_light ipsType_medium'>{lang="total_videos"}</span>
			</div>
			<div class='ipsGrid_span{$span} ipsType_center cVideoWidget_statsNumber'>
				<span class='ipsType_large ipsWidget_statsCount'>{number="$stats['totalSubmitters']"}</span><br>
				<span class='ipsType_light ipsType_medium'>{lang="total_video_submitters"}</span>
			</div>            
			{{if settings.vs_enable_comments AND $stats['totalComments']}}
				<div class='ipsGrid_span{$span} ipsType_center cVideoWidget_statsNumber'>
					<span class='ipsType_large ipsWidget_statsCount'>{number="$stats['totalComments']"}</span><br>
					<span class='ipsType_light ipsType_medium'>{lang="total_video_comments"}</span>
				</div>
			{{endif}}
			<div class='ipsGrid_span{$span} ipsType_center cVideoWidget_statsNumber'>
				<span class='ipsType_large ipsWidget_statsCount'>{number="$stats['totalViews']"}</span><br>
				<span class='ipsType_light ipsType_medium'>{lang="total_video_views"}</span>
			</div>
			{{if $latestVideo}}
				<div class='ipsGrid_span{$span} ipsType_left cNewestMember'>
					<div id='elVideoStatsLatest' class='ipsClearfix'>
						<span class='ipsType_minorHeading'>{lang="latest_video"}</span><br>
						<a href="{$latestVideo->url()}" class='ipsTruncate ipsTruncate_line'>{wordbreak="$latestVideo->title"}</a>
						<span class='ipsType_light ipsType_medium'>{lang="byline_nodate" htmlsprintf="$latestVideo->author()->link()"}</span>
					</div>
				</div>
			{{endif}}
		</div>
	{{endif}}
</div>]]></template>
 <template template_group="widgets" template_name="videosVideos" template_data="$videos, $orderField='date', $widgetTitle, $orientation='vertical'" template_location="front" template_app="videos"><![CDATA[{{if $orientation == 'vertical'}}
    <h3 class='ipsWidget_title ipsType_reset'>{{if $widgetTitle}}{$widgetTitle}{{else}}{{if $orderField == 'last_updated'}}{lang="block_videosVideos_last_updated"}{{elseif $orderField == 'video_rating'}}{lang="block_videosVideos_top_rated"}{{else}}{lang="block_videosVideos_latest_videos"}{{endif}}{{endif}}</h3>
    <div class='ipsWidget_inner'>
    	<div class='ipsPad_half'>
            {{if count( $videos )}}
                <ul class='ipsDataList ipsDataList_reducedSpacing'>
    				{{foreach $videos as $row}}
    					<li class='ipsDataItem'>
    						<div class='ipsDataItem_icon ipsPos_top'>
                                {template="thumb" group="global" app="videos" params="$row, 'tiny'"}
    						</div>
    						<div class='ipsDataItem_main'>
                                {{if settings.vs_enable_comments AND member.group['g_vs_view_comments']}}
                                    <div class="ipsCommentCount ipsPos_right {{if ( $row->num_comments ) === 0}}ipsFaded{{endif}}" data-ipsTooltip title='{lang="num_video_comments" pluralize="$row->num_comments"}'>{expression="$row->num_comments"}</div>
                                {{endif}}
    
    							<a href="{$row->url()}" class='ipsDataItem_title ipsType_break'>{wordbreak="$row->title"}</a>
                                {{if $orderField == 'video_rating' AND $row->averageRating()}}<br>{template="rating" app="core" params="'small', $row->averageRating()" group="global"}{{endif}}<br>
    							<span class='ipsType_light ipsType_small'>{lang="videos_by"}: {$row->author()->link()|raw} &middot; {datetime="( $orderField == 'last_updated' AND $row->last_updated ) ? $row->last_updated : $row->date" dateonly="true"}</span>
    						</div>
    					</li>
    				{{endforeach}}
     				<li class='ipsDataItem'>
    					<div class='ipsDataItem_main ipsType_small ipsType_light ipsType_center'>
                            <a {{if $orderField == 'date'}}href='{url="app=videos&module=videos&controller=browse&do=listall" seoTemplate="videos_listall"}{{else}}href='{url="app=videos&module=videos&controller=browse&do=listall&sortby={$orderField}&sortdirection=desc" seoTemplate="videos_listall"}{{endif}}'>{lang="view_all_videos"}</a>
    					</div>
    				</li>                    
                </ul>
    		{{else}}
    			<p class='ipsType_reset'>{lang="no_new_videos"}</p>
    		{{endif}}                    
    	</div>
    </div>    
{{else}}
    <h3 class='ipsWidget_title ipsType_reset'>{{if $widgetTitle}}{$widgetTitle}{{else}}{{if $orderField == 'last_updated'}}{lang="block_videosVideos_last_updated"}{{elseif $orderField == 'video_rating'}}{lang="block_videosVideos_top_rated"}{{else}}{lang="block_videosVideos_latest_videos"}{{endif}}{{endif}}</h3>
    <div class='ipsWidget_inner'>
		{{if count( $videos )}}
			<ul class='ipsGrid ipsGrid_collapsePhone ipsWidget_columns'>
				{{foreach $videos as $idx => $row}}
                    <li class='ipsGrid_span3 ipsType_center ipsType_blendLinks ipsClearfix ipsPad_half' style='min-width: 150px;'>
                    	{template="thumb" group="global" app="videos" params="$row"}
                		<div class='ipsSpacer_top ipsSpacer_half'>
                			<h3 class='ipsType_normal ipsType_reset ipsTruncate ipsTruncate_line' data-ipsTruncate data-ipsTruncate-size='1 lines' data-ipsTruncate-type='remove'>
                                <a href='{$row->url()}' title='{lang="view_this" sprintf="$row->title"}'>{$row->title}</a>
                			</h3>
                			<span class='ipsType_light ipsType_small'>{lang="videos_by"}: {$row->author()->link()|raw} &middot; {datetime="$row->date" dateonly="true"}</span>                 		
                        </div>
                    </li>
				{{endforeach}}
			</ul>
		{{else}}
			<p class='ipsType_reset'>{lang="no_new_videos"}</p>
		{{endif}}
    </div>
{{endif}}]]></template>
 <css css_location="front" css_app="videos" css_attributes="" css_path="." css_name="videos.css">/* Override core setting */
.ipsEmbeddedVideo.ipsEmbeddedVideo_limited {
	max-width: {setting=&quot;vs_max_video_width&quot;}px;
}
/* Custom profile pic size */
.ipsUserPhoto_tiny_videos img {
    width: 22px;
    height: 22px;    
}</css>
</theme>
